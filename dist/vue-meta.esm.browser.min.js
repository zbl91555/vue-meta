import e from"deepmerge";var t=null;function n(e,n){e.$root._vueMeta.initialized||!e.$root._vueMeta.initializing&&"watcher"!==n||(e.$root._vueMeta.initialized=null),e.$root._vueMeta.initialized&&!e.$root._vueMeta.paused&&function(e,n){void 0===n&&(n=10);clearTimeout(t),t=setTimeout(function(){e()},n)}(function(){return e.$meta().refresh()})}function i(e){return Array.isArray(e)}function r(e){return void 0===e}function a(e){return"object"==typeof e}function o(e){return"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function s(e,t){return t&&a(e)?(i(e[t])||(e[t]=[]),e):i(e)?e:[]}function d(e,t,n){s(e,t),e[t].push(n)}function c(e){return void 0===e&&(e=this),e&&(!0===e._vueMeta||a(e._vueMeta))}function f(e){if(!e.$root._vueMeta.navGuards&&e.$root.$router){e.$root._vueMeta.navGuards=!0;var t=e.$root.$router,n=e.$root.$meta();t.beforeEach(function(e,t,i){n.pause(),i()}),t.afterEach(function(){var e=n.resume().metaInfo;e&&e.afterNavigation&&u(e.afterNavigation)&&e.afterNavigation(e)})}}var l=1;var v={title:void 0,titleChunk:"",titleTemplate:"%s",htmlAttrs:{},bodyAttrs:{},headAttrs:{},base:[],link:[],meta:[],style:[],script:[],noscript:[],__dangerouslyDisableSanitizers:[],__dangerouslyDisableSanitizersByTagID:{}},h={keyName:"metaInfo",attribute:"data-vue-meta",ssrAttribute:"data-vue-meta-server-rendered",tagIDKeyName:"vmid",contentKeyName:"content",metaTemplateKeyName:"template",ssrAppId:"ssr"},p=["titleChunk","titleTemplate","changed","__dangerouslyDisableSanitizers","__dangerouslyDisableSanitizersByTagID"],m=["__dangerouslyDisableSanitizers","__dangerouslyDisableSanitizersByTagID"],y=["htmlAttrs","headAttrs","bodyAttrs"],g=["body","pbody"],$=["allowfullscreen","amp","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","truespeed","typemustmatch","visible"],b=function(){return console.warn("This vue app/component has no vue-meta configuration")};function _(e){return void 0===e&&(e=!0),this.$root._vueMeta.paused=!0,function(){return M(e)}}function M(e){if(void 0===e&&(e=!0),this.$root._vueMeta.paused=!1,e)return this.$root.$meta().refresh()}function T(e,t,n,i){var a=e.component,o=e.metaTemplateKeyName,s=e.contentKeyName;return r(n)&&(n=t[o],delete t[o]),!!n&&(r(i)&&(i=t[s]),t[s]=u(n)?n.call(a,i):n.replace(/%s/g,i),!0)}function N(e,t){return e.findIndex(t,arguments[2])}function I(e){return Array.from(e)}function A(e,t){return e.includes(t)}var w=[[/&/g,"&"],[/</g,"<"],[/>/g,">"],[/"/g,'"'],[/'/g,"'"]];function z(t,n,i){return void 0===i&&(i={}),n.hasOwnProperty("title")&&void 0===n.title&&delete n.title,y.forEach(function(e){if(n[e])for(var t in n[e])n[e].hasOwnProperty(t)&&void 0===n[e][t]&&($.includes(t)&&console.warn("VueMeta: Please note that since v2 the value undefined is not used to indicate boolean attributes anymore, see migration guide for details"),delete n[e][t])}),e(t,n,{arrayMerge:function(e,t){return function(e,t,n){var i=e.component,r=e.tagIDKeyName,a=e.metaTemplateKeyName,o=e.contentKeyName,u=[];return t.forEach(function(e,t){if(e[r]){var s=N(n,function(t){return t[r]===e[r]}),d=n[s];if(-1!==s){if(d.hasOwnProperty(o)&&void 0===d[o]||d.hasOwnProperty("innerHTML")&&void 0===d.innerHTML)return u.push(e),void n.splice(s,1);if(null!==d[o]&&null!==d.innerHTML){var c=e[a];c&&(d[a]?d[o]||T({component:i,metaTemplateKeyName:a,contentKeyName:o},d,void 0,e[o]):T({component:i,metaTemplateKeyName:a,contentKeyName:o},d,c))}else n.splice(s,1)}else u.push(e)}else u.push(e)}),u.concat(n)}(i,e,t)}})}function D(e,t,n){void 0===e&&(e={}),void 0===n&&(n={});var i=e.keyName,o=e.metaTemplateKeyName,s=e.tagIDKeyName,d=t.$options,c=t.$children;if(t._inactive)return n;if(d[i]){var f=d[i];if(u(f)&&(f=f.call(t)),!a(f))return n;n=z(n,f,e)}return c.length&&c.forEach(function(t){(function(e){return void 0===e&&(e=this),e&&!r(e._vueMeta)})(t)&&(n=D(e,t,n))}),o&&n.meta&&(n.meta.forEach(function(t){return T(e,t)}),n.meta=n.meta.filter(function(e,t,n){return!e.hasOwnProperty(s)||t===N(n,function(t){return t[s]===e[s]})})),n}function K(e,t,n){void 0===e&&(e={}),void 0===n&&(n=[]);var r=D(e,t,v);r.title&&(r.titleChunk=r.title),r.titleTemplate&&"%s"!==r.titleTemplate&&T({component:t,contentKeyName:"title"},r,r.titleTemplate,r.titleChunk||""),r.base&&(r.base=Object.keys(r.base).length?[r.base]:[]);var a={doEscape:function(e){return n.reduce(function(e,t){var n=t[0],i=t[1];return e.replace(n,i)},e)}};return m.forEach(function(e,t){if(0===t)s(r,e);else if(1===t)for(var n in r[e])s(r[e],n);a[e]=r[e]}),r=function e(t,n,r){var a=n.tagIDKeyName,u=r.doEscape;void 0===u&&(u=function(e){return e});var s={};for(var d in t){var c=t[d];if(A(p,d))s[d]=c;else{var f=m[0];if(r[f]&&A(r[f],d))s[d]=c;else{var l=t[a];l&&(f=m[1],r[f]&&r[f][l]&&A(r[f][l],d))?s[d]=c:"string"==typeof c?s[d]=u(c):i(c)?s[d]=c.map(function(t){return o(t)?e(t,n,r):u(t)}):o(c)?s[d]=e(c,n,r):s[d]=c}}}return s}(r,e,a)}function O(e,t){return e[t]||(e[t]=document.getElementsByTagName(t)[0]),e[t]}function k(e,t,n){var i=t.appId,r=t.attribute,a=t.type,o=t.tagIDKeyName;void 0===n&&(n={});var u=[a+"["+r+'="'+i+'"]',a+"[data-"+o+"]"].map(function(e){for(var t in n){var i=n[t];e+="[data-"+t+(i&&!0!==i?'="'+i+'"':"")+"]"}return e});return I(e.querySelectorAll(u.join(", ")))}function S(e,t,n){void 0===e&&(e={});var r=e.attribute,a=n.getAttribute(r),o=a?a.split(","):[],u=I(o),s=[];for(var d in t)if(t.hasOwnProperty(d)){var c=A($,d)?"":i(t[d])?t[d].join(" "):t[d];n.setAttribute(d,c||""),A(o,d)||o.push(d),s.push(u.indexOf(d))}var f=u.filter(function(e,t){return!A(s,t)}).reduce(function(e,t){return n.removeAttribute(t),e+1},0);o.length===f?n.removeAttribute(r):n.setAttribute(r,o.sort().join(","))}function E(e,t,n,i,r,a){void 0===t&&(t={});var o=t.attribute,u=t.tagIDKeyName,s=[u].concat(g),d=[],c={appId:e,attribute:o,type:n,tagIDKeyName:u},f={head:k(r,c),pbody:k(a,c,{pbody:!0}),body:k(a,c,{body:!0})};if(i.length>1){var l=[];i=i.filter(function(e){var t=JSON.stringify(e),n=!A(l,t);return l.push(t),n})}if(i.length)for(var v=function(){var t=p[h],i=document.createElement(n);for(var r in i.setAttribute(o,e),t)if(t.hasOwnProperty(r)){if("innerHTML"===r){i.innerHTML=t.innerHTML;continue}if("cssText"===r){i.styleSheet?i.styleSheet.cssText=t.cssText:i.appendChild(document.createTextNode(t.cssText));continue}var a=A(s,r)?"data-"+r:r,u=A($,r);if(u&&!t[r])continue;var c=u?"":t[r];i.setAttribute(a,c)}var l=f[function(e){var t=e.body,n=e.pbody;return t?"body":n?"pbody":"head"}(t)],v=void 0;l.some(function(e,t){return v=t,i.isEqualNode(e)})&&(v||0===v)?l.splice(v,1):d.push(i)},h=0,p=i;h<p.length;h+=1)v();for(var m=[],y=0,b=Object.values(f);y<b.length;y+=1){var _=b[y];m=m.concat(_)}for(var M=0,T=m;M<T.length;M+=1){var N=T[M];N.parentNode.removeChild(N)}for(var I=0,w=d;I<w.length;I+=1){var z=w[I];z.hasAttribute("data-body")?a.appendChild(z):z.hasAttribute("data-pbody")?a.insertBefore(z,a.firstChild):r.appendChild(z)}return{oldTags:m,newTags:d}}function x(e){return void 0===e&&(e={}),function(){var t=K(e,this.$root,w),n=function(e,t,n){void 0===t&&(t={});var r=t.ssrAttribute,a=t.ssrAppId,o={},u=O(o,"html");if(e===a&&u.hasAttribute(r))return u.removeAttribute(r),!1;var s,d={},c={};for(var f in n)if(!A(p,f))if("title"!==f){if(A(y,f)){var l=f.substr(0,4);S(t,n[f],O(o,l))}else if(i(n[f])){var v=E(e,t,f,n[f],O(o,"head"),O(o,"body")),h=v.oldTags,m=v.newTags;m.length&&(d[f]=m,c[f]=h)}}else((s=n.title)||""===s)&&(document.title=s);return{addedTags:d,removedTags:c}}(this.$root._vueMeta.appId,e,t);return n&&u(t.changed)&&t.changed(t,n.addedTags,n.removedTags),{vm:this,metaInfo:t,tags:n}}}function P(e,t){void 0===t&&(t={}),e.__vuemeta_installed||(e.__vuemeta_installed=!0,t=function(e){for(var t in e=a(e)?e:{},h)e[t]||(e[t]=h[t]);return e}(t),e.prototype.$meta=function(e){void 0===e&&(e={});var t=x(e),n=function(){};return function(){return this.$root._vueMeta?{getOptions:function(){return function(e){var t={};for(var n in e)t[n]=e[n];return t}(e)},refresh:t.bind(this),inject:n,pause:_.bind(this),resume:M.bind(this)}:{getOptions:b,refresh:b,inject:b,pause:b,resume:b}}}(t),e.mixin(function(e,t){var i=["activated","deactivated","beforeMount"];return{beforeCreate:function(){var a=this;if(Object.defineProperty(this,"_hasMetaInfo",{configurable:!0,get:function(){return e.config.devtools&&!this.$root._vueMeta.hasMetaInfoDeprecationWarningShown&&(console.warn("VueMeta DeprecationWarning: _hasMetaInfo has been deprecated and will be removed in a future version. Please use hasMetaInfo(vm) instead"),this.$root._vueMeta.hasMetaInfoDeprecationWarningShown=!0),c(this)}}),!r(this.$options[t.keyName])&&null!==this.$options[t.keyName]){if(this.$root._vueMeta||(this.$root._vueMeta={appId:l},l++),!this._vueMeta){this._vueMeta=!0;for(var o=this.$parent;o&&o!==this.$root;)r(o._vueMeta)&&(o._vueMeta=!1),o=o.$parent}u(this.$options[t.keyName])&&(this.$options.computed||(this.$options.computed={}),this.$options.computed.$metaInfo=this.$options[t.keyName],this.$isServer||d(this.$options,"created",function(){a.$watch("$metaInfo",function(){n(this,"watcher")})})),r(this.$root._vueMeta.initialized)&&(this.$root._vueMeta.initialized=this.$isServer,this.$root._vueMeta.initialized||(d(this.$options,"beforeMount",function(){a.$root.$el&&a.$root.$el.hasAttribute&&a.$root.$el.hasAttribute("data-server-rendered")&&(a.$root._vueMeta.appId=t.ssrAppId)}),d(this.$options,"mounted",function(){a.$root._vueMeta.initialized||(a.$root._vueMeta.initializing=!0,a.$nextTick(function(){var e=this,i=this.$root.$meta().refresh(),r=i.tags,a=i.metaInfo;!1===r&&null===this.$root._vueMeta.initialized&&this.$nextTick(function(){return n(e,"initializing")}),this.$root._vueMeta.initialized=!0,delete this.$root._vueMeta.initializing,!t.refreshOnceOnNavigation&&a.afterNavigation&&f(this)}))}),t.refreshOnceOnNavigation&&f(this))),this.$isServer||(i.forEach(function(e){d(a.$options,e,function(){return n(a,e)})}),d(this.$options,"destroyed",function(){var e=setInterval(function(){a.$el&&null!==a.$el.offsetParent||(clearInterval(e),a.$parent&&n(a,"destroyed"))},50)}))}}}}(e,t)))}r(window)||r(window.Vue)||P(window.Vue);var j={version:"2.1.0",install:P,hasMetaInfo:c};export default j;
